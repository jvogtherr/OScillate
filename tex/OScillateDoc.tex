\documentclass[12pt,a4paper]{scrartcl}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[ngerman]{babel}
\usepackage{amsmath}
\usepackage[automark, headsepline, footsepline]{scrpage2}
\usepackage{graphicx}
\usepackage{url}

\widowpenalty10000
\ihead[]{}
\chead[]{\headmark}
\ohead[]{}
\ifoot[]{}
\cfoot[\pagemark]{\raisebox{-.2cm}{\thepage}} 
\ofoot[]{}
\pagestyle{scrheadings}
\setkomafont{pageheadfoot}{\normalfont\small\sf}

\author{Jan Philipp Vogtherr \& Timmy Schüller\vspace{0.5cm}}
\title{\includegraphics[scale=0.8]{unilogo.pdf}\vspace*{1cm}
\mbox{Projekt OScillate:} \mbox{Ein Modell der Osnabrücker} Buslinien 11 und 21\vspace{0.3cm}}
\date{Universität Osnabrück \\
Im Rahmen der Veranstaltung \glqq Regelbasierte Modellierung\grqq \\
\vspace*{0.4cm}
Wintersemester 2013/2014 \\
\today}

\begin{document}

\maketitle
\thispagestyle{empty}
\newpage
\tableofcontents
\newpage

\section{Motivation}
Als Student an der Universität Osnabrück bzw. der Hochschule steht man täglich vor einer schwierigen Entscheidung, wenn man den Kampus am Westerberg erreichen möchte. Der Weg dorthin beinhaltet nämlich für viele eine Busfahrt vom zentralen Verkehrsknotenpunkt, dem Neumarkt, zum Zielort, wobei es dort zwei verschiedene Linien gibt, die jeweils eigene Vor- und Nachteile mit sich bringen. Die Buslinie 21 fährt einen kleinen Umweg, sodass sie langsamer ist, als die konkurrierende Buslinie 11. Außerdem fährt die 11 mit einem 10-Minuten Takt häufiger als die 21. Allerdings hält die 11 nicht direkt an der Haltestelle vor der Uni, sondern zieht immer einen Fußweg von maximal fünf Minuten mit sich. Die zu Beginn angesprochene Entscheidung ist also nun: \glqq Fahre ich heute mit der 11, oder der 21?\grqq

Das im folgende vorgestellte Projekt OScillate beschäftigt sich  mit ebendieser Problematik. Im Rahmen der Veranstaltung \glqq Regelbasierte Modellierung\grqq  wurde ein agentenbasiertes Modell erstellt, das die Entscheidungsdynamik %bessere Formulierung?
zwischen den konkurrierenden Buslinien 11 und 21 über einen annähernd normalen Tagesablauf, dh. über die Zeit, nachstellen soll.

In Abschnitt~\ref{design} werden zunächst grundlegende Designentscheidungen erläutert. Darauf basierend geht es in Abschnitt~\ref{impl} um die Umsetzung der Ideen, direkt gefolgt von einer Auswertung der daraus resultierenden Ergebnisse in Abschnitt~\ref{erg}. Abschließend diskutiert Abschnitt~\ref{fazit} den Verlauf des Projektes, sowie die erhaltenen Ergebnisse.

\section{Design}\label{design}
Das Ziel des Modelles sind von explorativer Natur und lässt sich in folgender Leitfrage zusammenfassen: \glqq Welche Faktoren haben einen Einfluss auf die Wahl der Buslinie?\grqq 

Da das Modell, um die Busfahrzeiten und Tagesabläufe eines Studenten darstellen zu können,  eine sehr hohe zeitliche Auflösung mit sich bringt, kann der Abstraktionsgrad als realistisch eingestuft werden. Die komplexe Entscheidung der homogenen Agenten, der Studenten, trägt ebenfalls dazu bei und führt zu einer hohen individuellen Komplexität. Funktionale Heterogenität gibt es in direktem Sinne nicht, weil es außer den Studenten keine weiteren Akteure gibt. Eine Interaktion zwischen Agenten ist ebenfalls minimal, denn einen direkten Austausch von Erfahrungen oder Ähnlichem zwischen den Studenten gibt es nicht.

\section{Implementation}\label{impl}
Die zentralen Elemente des Modells sind Studenten als Agenten des Systems und die Busverbindung, die die Umwelt darstellt, in der die Agenten selbstständig über ihr Handeln bestimmen können. Zunächst werden die verwendeten Mechanismen beider Elemente respektiv erklärt. Anschließend wird die Implementierung in Repast im Detail besprochen.

\subsection{Agent: Student}\label{agent}
Der Student soll sich täglich selbstständig von seiner Wohnung zum zentralen Verkehrsknotenpunkt bewegen, dem Neumarkt, und sich dort für eine Buslinie entscheiden, mit der er zur Universität fährt. Dort angekommen soll er für die Dauer einiger Vorlesungen auf dem Campus bleiben und anschließend von der Bushaltestelle an der Universität zurück zum Neumarkt fahren, wobei er auch in diesem Fall eine Buslinie auswählen muss. Das Ziel des Studenten ist die Auswahl einer Buslinie, mit der er eine möglichst kurze Reisedauer und wenig Wartezeit an den Haltestellen erreicht.

Die Studenten in dem Modell unterscheiden sich hinsichtlich des Zeitpunktes ihres Erscheinens und ihrer Aufenthaltsdauer in der Universität. So kommen einige Studenten besonders früh und hören viele Vorlesungen, während andere Studenten erst spät kommen und nur wenige Vorlesungen hören, bevor sie wieder nach Hause fahren.

Jeder Student hat eine bevorzugte Buslinie, die sich über die Zeit ändern kann. Nach jeder Busfahrt evaluiert der Student seine Entscheidung und merkt sich das Ergebnis seiner Überlegungen, sodass er die Zufriedenheit des Vortages bei jeder Entscheidung aufs neue mit einbeziehen kann. Im Modell wird die bevorzugte Buslinie als Parameter des Studenten dargestellt. Zu Beginn sind die bevorzugten Buslinien unter allen Studenten zufällig verteilt - mit Ausnahme der Erstsemesterstudenten, deren bevorzugte Buslinie zu Beginn stets die Linie 21 ist. Die Anzahl der Erstsemesterstudenten kann als Simulationsparameter variiert werden.

Außerdem kommt bei der Entscheidungsfindung der Buslinie ein Parameter zum Tragen, der im Folgenden als der „Sozialfaktor“ bezeichnet wird. Dieser Parameter ist unter den Studenten zufällig verteilt und modelliert die Bereitschaft eines Studenten, in einen bereits sehr vollen Bus einzusteigen. Dies kann verschiedene Situationen der echten Welt darstellen. Beispielsweise könnte ein niedriger Sozialfaktor zeigen, dass der Student in einer größeren Gruppe Studenten unterwegs ist und diese Gruppe nur dann in einen Bus einsteigt, wenn alle Mitglieder der Gruppe einen Sitzplatz bekommen können. Im Gegensatz dazu würde ein hoher Sozialfaktor zum Beispiel einen allein fahrenden Studenten darstellen, der auch bereit ist, in einen stark überfüllten Bus einzusteigen.

\subsection{Umwelt: Busverbindung}\label{bus}
Die Busverbindung modelliert die Haltestellen am Neumarkt und an der Universität, sowie alle Busse, die diese Haltestellen anfahren. Den Studenten wird somit die Möglichkeit gegeben sich an einer Haltestelle anzustellen, auf einen beliebigen Bus zu warten und mit diesem Bus zum Ziel zu fahren. Nach Ablauf der Fahrtzeit kann der Student wieder aus dem Bus aussteigen und von der Haltestelle nach Hause beziehungsweise in die Universität gehen. 

\subsection{Implementierung mithilfe von Repast Symphony}\label{repast}
Das Modell wird mit dem Modellierungswerkzeug Repast Simphony implementiert und ausgewertet. Zunächst müssen Umwelt und Agenten als Java-Klassen programmiert werden. Jede Simulation muss eine Klasse beinhalten, die das Interface „ContextBuilder“ implementiert. In diesem Fall ist dies die Klasse „OScillateBuilder“. Die Methode „build“ soll nun die Umwelt initialisieren und die Agenten in der Umwelt ansiedeln, um die Simulation starten zu können. Zunächst werden die Simulationsparameter, die der Nutzer in der graphischen Oberfläche spezifizieren kann, ausgelesen und für die spätere Verwendung vorbereitet. Anschließend werden sowohl eine neue Busverbindung als auch die gewünschte Anzahl an Studenten erzeugt.

Die Busverbindung enthält drei Listen und eine Sammlung von Schlüssel/Wert-Paaren (im Folgenden "Map“), die die Bushaltestellen und die Universität darstellen. Die Listen enthalten alle Studenten die sich Zuhause, am Neumarkt oder an der Haltestelle an der Universität aufhalten. Die Map enthält alle Studenten, die sich zur Zeit in der Universität befinden, zusammen mit der entsprechenden restlichen Aufenthaltsdauer.

Außerdem enthält die Busverbindung je eine Instanz der Klasse „Bus“, von der jede eine der beiden Buslinien 11 und 21 darstellt. Ein Bus-Objekt modelliert alle Busse, die derzeit auf der entsprechenden Linie fahren, mit allen Fahrgästen, die in einem der Busse sitzen. Konkret bedeutet das, dass die Klasse eine Kapselung einer Map ist - in dieser Map werden, ähnlich wie bei der Universität, die Studenten im Bus mit ihrer restlichen Fahrtzeit und ihrer Fahrtrichtung gespeichert. Somit kann man mit zwei Objekten alle Studenten darstellen, die zur Zeit in irgendeinem Bus auf der Strecke sitzen.

Wenn ein Student also vom Neumarkt zur Uni fährt, so wird er zunächst in der „Neumarkt“-Liste der Busverbindung eingeordnet, bis er in einen Bus einsteigt. Dann wird er in die Map des Busses eingetragen und verbleibt dort, bis seine Fahrtzeit abgelaufen ist. Nun verlässt er den Bus an der Universität und wird mit seiner Aufenthaltszeit in die Map der Universität eingetragen. Nachdem auch hier seine Aufenthaltszeit irgendwann abgelaufen ist, wird er in die der Haltestelle an der Universität entsprechenden Liste eingetragen, bis er dort in einen Bus steigt. In diesem Bus wird er wiederum mit seiner verbleibenden Fahrzeit eingetragen und verweilt im Bus, bis diese abgelaufen ist und er somit am Ende des Tages am Neumarkt angekommen ist und nach Hause geht, wo er in die entsprechende „Zuhause“-Liste eingetragen wird, bis er am nächsten morgen wieder zum Neumarkt geht. Zusammenfassend kann man an dieser Stelle sagen, dass alle Mengen von Studenten mit unbestimmter Aufenthaltszeit an ihrem aktuellen Ort als Liste und alle Mengen von Studenten mit begrenzter Aufenthaltszeit an ihrem aktuellen Ort als Map gespeichert werden.

Die Klasse „Student“ speichert und abstrahiert die jeweiligen Eigenschaften des Studenten, die bei seiner Erstellung angegeben werden und sich im Laufe des Modells entwickeln. So kann beispielsweise der Sozialfaktor zu Beginn festgelegt werden. Die wichtigste Fähigkeit des Studenten ist die Entscheidung, die er bei jeder Busfahrt treffen muss. Dargestellt wird diese mit der Methode „entscheide“. Übergeben werden die Informationen, welche Buslinie gerade an der Haltestelle steht und wie voll die jeweiligen Busse sind. So kann der Student in einen Bus einsteigen oder warten und vorerst gar nichts tun. Alle Möglichkeiten der Entscheidung werden überprüft und die Möglichkeit mit der höchsten Priorität wird ausgewählt, sodass der Student seine Lage optimal eingeschätzt und effizient gehandelt hat.

Eine Besonderheit der Modellierung mit Repast Simphony sind die sogenannten „ScheduledMethods“. Durch eine entsprechende Annotation im Java-Code kann man eine Methode zu einem definierten Zeitpunkt im Programmablauf ausführen lassen. Repast Simphony rechnet in „Ticks“ als Zeitschritt. Im Modell entspricht ein Tick fünf Minuten. Somit ergeben sich für die Buslinie 11 zum Beispiel eine Fahrtzeit von zwei Ticks, während die Buslinie 21 eine Fahrtzeit von drei Ticks hat. Die Busverbindung ist das einzige Objekt in der Simulation, das solche Methoden enthält und fungiert somit als eine Art Managerklasse, die den anderen Objekten zu jedem Zeitpunkt Anordnungen gibt. Das beinhaltet zum Beispiel das Aktualisieren der verbleibenden Aufenthalts- und Fahrtzeiten der Studenten in der Universität und in den Bussen, sowie das Ein- und Aussteigen an den Haltestellen. Außerdem bietet die Busverbindung die nötigen Schnittstellen zur graphischen Auswertung der Simulation, in dem die Klasse verschiedene Methoden für statistische Angaben zum Modell bietet. 

\section{Auswertung}\label{erg}

\section{Fazit}\label{fazit}

\end{document}